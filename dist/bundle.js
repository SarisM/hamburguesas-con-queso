(()=>{"use strict";var t,e,n,a,r,o={},s={};function i(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={exports:{}};return o[t](n,n.exports,i),n.exports}i.m=o,i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,n)=>(i.f[n](t,e),e)),[])),i.u=t=>t+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="bookloop_copie:",i.l=(n,a,r,o)=>{if(t[n])t[n].push(a);else{var s,c;if(void 0!==r)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+r){s=u;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",e+r),s.src=n),t[n]=[a];var h=(e,a)=>{s.onerror=s.onload=null,clearTimeout(p);var r=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(a))),e)return e(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={792:0};i.f.j=(e,n)=>{var a=i.o(t,e)?t[e]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise(((n,r)=>a=t[e]=[n,r]));n.push(a[2]=r);var o=i.p+i.u(e),s=new Error;i.l(o,(n=>{if(i.o(t,e)&&(0!==(a=t[e])&&(t[e]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,a[1](s)}}),"chunk-"+e,e)}};var e=(e,n)=>{var a,r,[o,s,c]=n,d=0;if(o.some((e=>0!==t[e]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);c&&c(i)}for(e&&e(n);d<o.length;d++)r=o[d],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0},n=self.webpackChunkbookloop_copie=self.webpackChunkbookloop_copie||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),function(t){t.HOME="HOME",t.PRODUCTS="PRODUCTS",t.ADDPRODUCTS="ADDPRODUCTS",t.MODIFYPRODUCTS="MODIFYPROMDUCTS",t.EDITPRODUCTS="EDITPRODUCTS"}(n||(n={})),(r=a||(a={})).NAVIGATE="NAVIGATE",r.ADDPRODUCTS="ADDPRODUCTS",r.GETPRODUCTS="GETPRODUCTS",r.DELETEPRODUCT="DELETEPRODUCT",r.UPDATEPRODUCT="UPDATEPRODUCT";let c={screen:"HOME",products:[],productToEdit:{}},d=[];const l=t=>{const e=((t,e)=>{const{action:n,payload:r}=t;switch(n){case a.NAVIGATE:return{...e,screen:r};case a.ADDPRODUCTS:return{...e,products:[...e.products,r]};case a.GETPRODUCTS:return{...e,products:r||[]};case a.DELETEPRODUCT:return{...e,products:[...e.products.filter((t=>t.uid!==r))]};case a.UPDATEPRODUCT:return{...e,products:[...e.products.map((t=>t.uid===r.uid?r:t))]};default:return e}})(t,JSON.parse(JSON.stringify(c)));c=e,d.forEach((t=>t.render()))},u=t=>{d=[...d,t]};let h;const p=async()=>{if(!h){const{initializeApp:t}=await Promise.all([i.e(990),i.e(223)]).then(i.bind(i,223)),{getFirestore:e}=await Promise.all([i.e(990),i.e(594)]).then(i.bind(i,594)),n=t({apiKey:"AIzaSyAGmPUQLXkmC5kwgKJR9HQcf5w6rLq_OFo",authDomain:"parcial-corte-3.firebaseapp.com",projectId:"parcial-corte-3",storageBucket:"parcial-corte-3.firebasestorage.app",messagingSenderId:"534588026588",appId:"1:534588026588:web:b67942dc1eb271c61d0e19"});h=e(n)}return h},m=t=>({action:a.NAVIGATE,payload:t}),b=async()=>{const t=await(async()=>{try{const t=await p(),{getDocs:e,collection:n}=await Promise.all([i.e(990),i.e(594)]).then(i.bind(i,594)),a=n(t,"products"),r=await e(a),o=[];return r.forEach((t=>{o.push(t.data())})),o}catch(t){console.error("Error getting document:",t)}})();return{action:a.GETPRODUCTS,payload:t}};class g extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.editedProduct=c.productToEdit,this.changeUrl=this.changeUrl.bind(this),this.changeAlbum=this.changeAlbum.bind(this),this.changeArtist=this.changeArtist.bind(this),this.changePrice=this.changePrice.bind(this),this.changeQuantity=this.changeQuantity.bind(this),this.submitForm=this.submitForm.bind(this)}connectedCallback(){this.render()}changeUrl(t){const e=t.target;this.editedProduct.url=e.value}changeAlbum(t){const e=t.target;console.log("INPUT",e.value),console.log("PRODUCT",this.editedProduct),this.editedProduct.album=e.value}changeArtist(t){const e=t.target;this.editedProduct.artist=e.value}changePrice(t){const e=t.target;this.editedProduct.price=Number(e.value)}changeQuantity(t){const e=t.target;this.editedProduct.quantity=Number(e.value)}async submitForm(){console.log("Edited Product for FB",this.editedProduct),l((async t=>{console.log(t);try{const e=await p(),{updateDoc:n,doc:a}=await Promise.all([i.e(990),i.e(594)]).then(i.bind(i,594)),r=a(e,"products",t.uid);await n(r,t)}catch(t){console.error("Error updating document:",t)}})(this.editedProduct)),l(m(n.HOME))}render(){if(!this.shadowRoot)return;const t=document.createElement("section");t.className="form-container";const e=document.createElement("div");e.className="form-div";const n=document.createElement("h1");n.innerText="Edit Product",n.className="form-title",e.appendChild(n);const a=document.createElement("input");a.placeholder="URL",a.type="url",a.className="form-input",a.required=!0,a.addEventListener("change",this.changeUrl),e.appendChild(a);const r=document.createElement("input");r.placeholder="Album",r.className="form-input",r.required=!0,r.addEventListener("change",this.changeAlbum),e.appendChild(r);const o=document.createElement("input");o.placeholder="Artist",o.className="form-input",o.required=!0,o.addEventListener("change",this.changeArtist),e.appendChild(o);const s=document.createElement("input");s.placeholder="Price",s.type="number",s.min="0",s.step="0.01",s.className="form-input",s.required=!0,s.addEventListener("change",this.changePrice),e.appendChild(s);const i=document.createElement("input");i.placeholder="Quantity",i.type="number",i.min="1",i.step="1",i.className="form-input",i.required=!0,i.addEventListener("change",this.changeQuantity),e.appendChild(i);const c=document.createElement("button");c.innerText="Start now",c.className="form-button",c.addEventListener("click",this.submitForm),e.appendChild(c),t.appendChild(e),this.shadowRoot.appendChild(t)}}customElements.define("edit-form",g);class E extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=this.ownerDocument.createElement("section");t.className="main-container";const e=this.ownerDocument.createElement("nav-bar");t.appendChild(e);const n=this.ownerDocument.createElement("section");n.className="form-container";const a=this.ownerDocument.createElement("edit-form");n.appendChild(a),t.appendChild(n),this.shadowRoot.appendChild(t)}}}customElements.define("app-edit-products",E);class C extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.navigateTo=this.navigateTo.bind(this)}connectedCallback(){this.render()}async navigateTo(t){try{const e=await m(t);return!!e&&(l(e),!0)}catch(e){return console.error(`Error navigating to screen ${t}:`,e),!1}}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=document.createElement("style");t.textContent="\n                .nav-bar {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    gap: 20px;\n                    background: linear-gradient(90deg, #4CAF50, #2196F3);\n                    padding: 15px 30px;\n                    border-radius: 10px;\n                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n                }\n                .nav-button {\n                    background-color: white;\n                    color: #333;\n                    border: none;\n                    padding: 12px 24px;\n                    font-size: 18px;\n                    font-family: Arial, sans-serif;\n                    font-weight: bold;\n                    cursor: pointer;\n                    border-radius: 8px;\n                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n                    transition: transform 0.2s, background-color 0.3s;\n                }\n                .nav-button:hover {\n                    background-color: #f1f1f1;\n                    transform: scale(1.05);\n                }\n                .nav-button:active {\n                    transform: scale(0.95);\n                }\n            ";const e=document.createElement("div");e.className="nav-bar",[{text:"Home",screen:n.HOME},{text:"Add Product",screen:n.ADDPRODUCTS},{text:"Modify Product",screen:n.MODIFYPRODUCTS}].forEach((({text:t,screen:n})=>{const a=document.createElement("button");a.textContent=t,a.className="nav-button",a.addEventListener("click",(()=>this.navigateTo(n))),e.appendChild(a)})),this.shadowRoot.append(t,e)}}}customElements.define("nav-bar",C);class w extends HTMLElement{constructor(){super(),this.credentials={id:this.generateUniqueId(),url:"",album:"",artist:"",price:0,quantity:0},this.attachShadow({mode:"open"}),this.submitForm=this.submitForm.bind(this),this.changeUrl=this.changeUrl.bind(this),this.changeAlbum=this.changeAlbum.bind(this),this.changeArtist=this.changeArtist.bind(this),this.changePrice=this.changePrice.bind(this),this.changeQuantity=this.changeQuantity.bind(this)}generateUniqueId(){return`${(new Date).getTime()}-${Math.floor(1e4*Math.random())}`}changeUrl(t){const e=t.target;this.credentials.url=e.value}changeAlbum(t){const e=t.target;this.credentials.album=e.value}changeArtist(t){const e=t.target;this.credentials.artist=e.value}changePrice(t){const e=t.target;this.credentials.price=Number(e.value)}changeQuantity(t){const e=t.target;this.credentials.quantity=Number(e.value)}validateForm(){const{url:t,album:e,artist:n,price:a,quantity:r}=this.credentials;return t&&e&&n?isNaN(a)||a<=0?(alert("Please enter a valid price"),!1):!(isNaN(r)||r<=0)||(alert("Please enter a valid quantity"),!1):(alert("Please fill all text fields"),!1)}async submitForm(){if(!this.validateForm())return;this.credentials.id||(this.credentials.id=this.generateUniqueId());const t=await(async t=>{const e=await(async t=>{try{const e=await p(),{setDoc:n,doc:a}=await Promise.all([i.e(990),i.e(594)]).then(i.bind(i,594)),r=a(e,"products",t.id);return await n(r,t),!0}catch(t){return console.error("Error adding document:",t),!1}})(t);return e?{action:a.ADDPRODUCTS,payload:t}:null})(this.credentials);t?(l(t),l(m(n.HOME))):alert("Could not create the product")}connectedCallback(){this.render()}render(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML="";const t=document.createElement("section");t.className="form-container";const e=document.createElement("nav-bar");t.appendChild(e);const n=document.createElement("div");n.className="form-div";const a=document.createElement("h1");a.innerText="Add Product",n.appendChild(a),[{label:"URL",type:"text",changeHandler:this.changeUrl},{label:"Album",type:"text",changeHandler:this.changeAlbum},{label:"Artist",type:"text",changeHandler:this.changeArtist},{label:"Price",type:"number",changeHandler:this.changePrice},{label:"Quantity",type:"number",changeHandler:this.changeQuantity}].forEach((({label:t,type:e,changeHandler:a})=>{const r=document.createElement("label");r.innerText=t;const o=document.createElement("input");o.type=e,o.addEventListener("input",a),n.appendChild(r),n.appendChild(o)}));const r=document.createElement("button");r.innerText="Add Product",r.addEventListener("click",this.submitForm),n.appendChild(r),t.appendChild(n),this.shadowRoot.appendChild(t)}}customElements.define("app-add-products",w);class f extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.navigateToEditProductScreen=this.navigateToEditProductScreen.bind(this)}connectedCallback(){this.render()}async navigateToEditProductScreen(){try{const t=await m(n.EDITPRODUCTS);return!!t&&(l(t),!0)}catch(t){return console.error("Error navigating to add product screen:",t),!1}}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=document.createElement("style");t.textContent="\n                .edit-button {\n                    background-color: #007BFF;\n                    color: white;\n                    border: none;\n                    padding: 10px 20px;\n                    font-size: 16px;\n                    cursor: pointer;\n                    border-radius: 5px;\n                }\n                .edit-button:hover {\n                    background-color: #0056b3;\n                }\n            ";const e=document.createElement("button");e.textContent="Edit",e.className="edit-button",e.addEventListener("click",this.navigateToEditProductScreen),this.shadowRoot.append(t,e)}}}var v,y,D;customElements.define("edit-button",f),function(t){t.uid="uid"}(v||(v={}));class T extends HTMLElement{static get observedAttributes(){return Object.keys(v)}attributeChangedCallback(t,e,n){this[t]=n||void 0}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){const t=this.ownerDocument.createElement("button");t.textContent="Delete",t.className="delete-button",t.addEventListener("click",(()=>{console.log("Delete UID",this.uid),l((async t=>(await(async t=>{const e=await p(),{doc:n,deleteDoc:a}=await Promise.all([i.e(990),i.e(594)]).then(i.bind(i,594)),r=n(e,"products",t);await a(r).then((()=>{console.log("Document successfully deleted!")})).catch((t=>{console.log("IT IS THIS ERROR!vvvv"),console.error("Error removing document: ",t)}))})(t),{action:a.DELETEPRODUCT,payload:t}))(this.uid))})),this.shadowRoot.appendChild(t)}}}customElements.define("delete-button",T),function(t){t.url="url",t.album="album",t.artist="artist",t.price="price",t.quantity="quantity"}(y||(y={}));class P extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys(y)}attributeChangedCallback(t,e,n){switch(t){case y.url:this.url=n;break;case y.album:this.album=n;break;case y.artist:this.artist=n;break;case y.price:this.price=n?Number(n):0;break;case y.quantity:this.quantity=n?Number(n):0}this.render()}connectedCallback(){this.render(),u(this)}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=this.ownerDocument.createElement("div");t.className="products-card";const e=this.ownerDocument.createElement("img");e.className="products-img",e.src=this.url||"No image available",e.alt=this.album||"No album available",t.appendChild(e);const n=this.ownerDocument.createElement("h2");n.className="products-album",n.textContent=this.album||"No album available",t.appendChild(n);const a=this.ownerDocument.createElement("p");a.className="products-artist",a.textContent=this.artist||"No artist available",t.appendChild(a);const r=this.ownerDocument.createElement("p");r.className="products-price",r.textContent=`Price: $${this.price||0}`,t.appendChild(r);const o=this.ownerDocument.createElement("p");o.className="products-quantity",o.textContent=`Quantity: ${this.quantity||0}`,t.appendChild(o),this.shadowRoot.appendChild(t)}}}customElements.define("products-home-component",P);class R extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),u(this)}async connectedCallback(){if(0===c.products.length){const t=await b();t&&l(t)}this.render()}async renderProducts(){this.productsContainer&&(c.products&&Array.isArray(c.products)?(this.productsContainer.innerHTML="",c.products.forEach((t=>{const e=this.ownerDocument.createElement("products-home-component");e.setAttribute(y.url,t.url),e.setAttribute(y.album,t.album),e.setAttribute(y.artist,t.artist),e.setAttribute(y.price,t.price.toString()),e.setAttribute(y.quantity,t.quantity.toString()),e.classList.add("product"),this.productsContainer?.appendChild(e)}))):console.log("No products found"))}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=this.ownerDocument.createElement("section");t.className="home-container";const e=this.ownerDocument.createElement("nav-bar");t.appendChild(e),this.productsContainer=this.ownerDocument.createElement("div"),this.productsContainer.className="products-container",t.appendChild(this.productsContainer),this.shadowRoot.appendChild(t),this.renderProducts()}}}customElements.define("app-home",R),function(t){t.uid="uid",t.url="url",t.album="album",t.artist="artist",t.price="price",t.quantity="quantity"}(D||(D={}));class A extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys(D)}attributeChangedCallback(t,e,n){switch(t){case D.url:this.url=n;break;case D.uid:this.uid=n;break;case D.album:this.album=n;break;case D.artist:this.artist=n;break;case D.price:this.price=n?Number(n):0;break;case D.quantity:this.quantity=n?Number(n):0}this.render()}connectedCallback(){this.render(),u(this)}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=this.ownerDocument.createElement("div");t.className="products-card";const e=this.ownerDocument.createElement("img");e.className="products-img",e.src=this.url||"No image available",e.alt=this.album||"No album available",t.appendChild(e);const a=this.ownerDocument.createElement("h2");a.className="products-album",a.textContent=this.album||"No album available",t.appendChild(a);const r=this.ownerDocument.createElement("p");r.className="products-artist",r.textContent=this.artist||"No artist available",t.appendChild(r);const o=this.ownerDocument.createElement("p");o.className="products-price",o.textContent=`Price: $${this.price||0}`,t.appendChild(o);const s=this.ownerDocument.createElement("p");s.className="products-quantity",s.textContent=`Quantity: ${this.quantity||0}`,t.appendChild(s);const i=document.createElement("button");i.textContent="Edit",i.className="edit-button",i.addEventListener("click",(()=>{c.productToEdit={uid:this.uid,url:this.url,album:this.album,artist:this.artist,price:this.price,quantity:this.quantity},l(m(n.EDITPRODUCTS))})),t.appendChild(i);const d=this.ownerDocument.createElement("delete-button");d.setAttribute(v.uid,this.uid||""),t.appendChild(d),this.shadowRoot.appendChild(t)}}}customElements.define("products-component",A);class N extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),u(this)}async connectedCallback(){if(0===c.products.length){const t=await b();t&&l(t)}this.render()}async renderProducts(){console.log(c.products),this.productsContainer&&(c.products&&Array.isArray(c.products)?(this.productsContainer.innerHTML="",c.products.forEach((t=>{console.log(t.id);const e=this.ownerDocument.createElement("products-component");e.setAttribute(D.url,t.url),e.setAttribute(D.album,t.album),e.setAttribute(D.artist,t.artist),e.setAttribute(D.price,t.price.toString()),e.setAttribute(D.quantity,t.quantity.toString()),e.setAttribute(D.uid,t.id),e.classList.add("product"),this.productsContainer?.appendChild(e)}))):console.log("No products found"))}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=this.ownerDocument.createElement("section");t.className="home-container";const e=this.ownerDocument.createElement("nav-bar");t.appendChild(e),this.productsContainer=this.ownerDocument.createElement("div"),this.productsContainer.className="products-container",t.appendChild(this.productsContainer),this.shadowRoot.appendChild(t),this.renderProducts()}}}customElements.define("app-modify-products",N);class x extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),u(this)}connectedCallback(){this.render()}render(){if(this.shadowRoot){switch(this.shadowRoot.innerHTML="",c.screen){case n.HOME:const t=this.ownerDocument.createElement("app-home");this.shadowRoot.appendChild(t);break;case n.EDITPRODUCTS:const e=this.ownerDocument.createElement("app-edit-products");this.shadowRoot.appendChild(e);break;case n.ADDPRODUCTS:const a=this.ownerDocument.createElement("app-add-products");this.shadowRoot.appendChild(a);break;case n.MODIFYPRODUCTS:const r=this.ownerDocument.createElement("app-modify-products");this.shadowRoot.appendChild(r)}console.log("Current screen:",c.screen)}}}customElements.define("app-container",x)})();